{"ast":null,"code":"import _classCallCheck from\"/home/lucaswerner/repositories/github-personal/movie-cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lucaswerner/repositories/github-personal/movie-cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/lucaswerner/repositories/github-personal/movie-cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/lucaswerner/repositories/github-personal/movie-cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/lucaswerner/repositories/github-personal/movie-cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link,Redirect}from'react-router-dom';import*as movieAPI from'../services/movieAPI';import{Loading}from'../components';var MovieDetails=/*#__PURE__*/function(_Component){_inherits(MovieDetails,_Component);var _super=_createSuper(MovieDetails);function MovieDetails(props){var _this;_classCallCheck(this,MovieDetails);_this=_super.call(this,props);_this.state={movie:'',isShouldRedirect:false};_this.onChangeRedirect=_this.onChangeRedirect.bind(_assertThisInitialized(_this));return _this;}_createClass(MovieDetails,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;movieAPI.getMovie(this.props.match.params.id).then(function(movie){return _this2.setState({movie:movie});});}},{key:\"onChangeRedirect\",value:function onChangeRedirect(){var id=this.state.movie.id;movieAPI.deleteMovie(id);this.setState({isShouldRedirect:true});}},{key:\"render\",value:function render(){var _this$state=this.state,movie=_this$state.movie,isShouldRedirect=_this$state.isShouldRedirect;var title=movie.title,storyline=movie.storyline,imagePath=movie.imagePath,genre=movie.genre,rating=movie.rating,subtitle=movie.subtitle,id=movie.id;if(isShouldRedirect)return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});if(!movie)return/*#__PURE__*/React.createElement(Loading,null);return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",\"data-testid\":\"movie-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-image\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"Movie Cover\",src:\"../\".concat(imagePath)}),/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},title)),/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"p\",null,\"Subtitle: \".concat(subtitle)),/*#__PURE__*/React.createElement(\"p\",null,\"Storyline: \".concat(storyline)),/*#__PURE__*/React.createElement(\"p\",null,\"Genre: \".concat(genre)),/*#__PURE__*/React.createElement(\"p\",null,\"Rating: \".concat(rating))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(Link,{to:\"/movies/\".concat(id,\"/edit\")},\"EDITAR\"),/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"VOLTAR\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:this.onChangeRedirect},\"DELETAR\")))));}}]);return MovieDetails;}(Component);export default MovieDetails;","map":{"version":3,"sources":["/home/lucaswerner/repositories/github-personal/movie-cards/src/pages/MovieDetails.js"],"names":["React","Component","Link","Redirect","movieAPI","Loading","MovieDetails","props","state","movie","isShouldRedirect","onChangeRedirect","bind","getMovie","match","params","id","then","setState","deleteMovie","title","storyline","imagePath","genre","rating","subtitle"],"mappings":"q3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,sBAA1B,CACA,OAASC,OAAT,KAAwB,eAAxB,C,GAEMC,CAAAA,Y,4GACJ,sBAAYC,KAAZ,CAAmB,8CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,EADI,CAEXC,gBAAgB,CAAE,KAFP,CAAb,CAKA,MAAKC,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAxB,CAPiB,aAQlB,C,sFAEmB,iBAClBR,QAAQ,CAACS,QAAT,CAAkB,KAAKN,KAAL,CAAWO,KAAX,CAAiBC,MAAjB,CAAwBC,EAA1C,EACGC,IADH,CACQ,SAACR,KAAD,QAAW,CAAA,MAAI,CAACS,QAAL,CAAc,CAAET,KAAK,CAALA,KAAF,CAAd,CAAX,EADR,EAED,C,2DAEkB,IACTO,CAAAA,EADS,CACF,KAAKR,KAAL,CAAWC,KADT,CACTO,EADS,CAEjBZ,QAAQ,CAACe,WAAT,CAAqBH,EAArB,EACA,KAAKE,QAAL,CAAc,CACZR,gBAAgB,CAAE,IADN,CAAd,EAGD,C,uCAEQ,iBAC6B,KAAKF,KADlC,CACCC,KADD,aACCA,KADD,CACQC,gBADR,aACQA,gBADR,IAGLU,CAAAA,KAHK,CAIHX,KAJG,CAGLW,KAHK,CAGEC,SAHF,CAIHZ,KAJG,CAGEY,SAHF,CAGaC,SAHb,CAIHb,KAJG,CAGaa,SAHb,CAGwBC,KAHxB,CAIHd,KAJG,CAGwBc,KAHxB,CAG+BC,MAH/B,CAIHf,KAJG,CAG+Be,MAH/B,CAGuCC,QAHvC,CAIHhB,KAJG,CAGuCgB,QAHvC,CAGiDT,EAHjD,CAIHP,KAJG,CAGiDO,EAHjD,CAMP,GAAIN,gBAAJ,CAAsB,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CAEtB,GAAI,CAACD,KAAL,CAAY,mBAAO,oBAAC,OAAD,MAAP,CAEZ,mBACE,2BAAK,SAAS,CAAC,KAAf,CAAqB,cAAY,eAAjC,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,2BAAK,GAAG,CAAC,aAAT,CAAuB,GAAG,cAAQa,SAAR,CAA1B,EADF,cAEE,4BAAM,SAAS,CAAC,YAAhB,EAA8BF,KAA9B,CAFF,CADF,cAKE,2BAAK,SAAS,CAAC,cAAf,eACE,iDAAiBK,QAAjB,EADF,cAEE,kDAAkBJ,SAAlB,EAFF,cAGE,8CAAcE,KAAd,EAHF,cAIE,+CAAeC,MAAf,EAJF,CALF,cAWE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,IAAD,EAAM,EAAE,mBAAaR,EAAb,SAAR,WADF,cAEE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,WAFF,cAGE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,KAAKL,gBAApC,YAHF,CAXF,CADF,CADF,CADF,CAuBD,C,0BAzDwBV,S,EAkE3B,cAAeK,CAAAA,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, Redirect } from 'react-router-dom';\nimport * as movieAPI from '../services/movieAPI';\nimport { Loading } from '../components';\n\nclass MovieDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: '',\n      isShouldRedirect: false,\n    };\n\n    this.onChangeRedirect = this.onChangeRedirect.bind(this);\n  }\n\n  componentDidMount() {\n    movieAPI.getMovie(this.props.match.params.id)\n      .then((movie) => this.setState({ movie }));\n  }\n\n  onChangeRedirect() {\n    const { id } = this.state.movie;\n    movieAPI.deleteMovie(id);\n    this.setState({\n      isShouldRedirect: true,\n    });\n  }\n\n  render() {\n    const { movie, isShouldRedirect } = this.state;\n    const {\n      title, storyline, imagePath, genre, rating, subtitle, id,\n    } = movie;\n\n    if (isShouldRedirect) return <Redirect to=\"/\" />;\n\n    if (!movie) return <Loading />;\n\n    return (\n      <div className=\"row\" data-testid=\"movie-details\">\n        <div className=\"col s12 m7\">\n          <div className=\"card\">\n            <div className=\"card-image\">\n              <img alt=\"Movie Cover\" src={`../${imagePath}`} />\n              <span className=\"card-title\">{title}</span>\n            </div>\n            <div className=\"card-content\">\n              <p>{`Subtitle: ${subtitle}`}</p>\n              <p>{`Storyline: ${storyline}`}</p>\n              <p>{`Genre: ${genre}`}</p>\n              <p>{`Rating: ${rating}`}</p>\n            </div>\n            <div className=\"card-action\">\n              <Link to={`/movies/${id}/edit`}>EDITAR</Link>\n              <Link to=\"/\">VOLTAR</Link>\n              <button type=\"button\" onClick={this.onChangeRedirect}>DELETAR</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nMovieDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({ id: PropTypes.number }),\n  }).isRequired,\n};\n\nexport default MovieDetails;\n"]},"metadata":{},"sourceType":"module"}